---
import "../globals.css";
---

<!doctype html>
<html lang="pt-BR" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>OV Sistemas</title>
  </head>
  <body class="bg-background">
    <main>
      <slot />
    </main>
    <script>
      // Scroll suave para 칙ncoras ao carregar a p치gina
      if (window.location.hash) {
        const hash = window.location.hash;
        setTimeout(() => {
          const element = document.querySelector(hash);
          if (element) {
            const headerOffset = 80; // Altura aproximada do header fixo
            const elementPosition = element.getBoundingClientRect().top;
            const offsetPosition =
              elementPosition + window.pageYOffset - headerOffset;

            window.scrollTo({
              top: offsetPosition,
              behavior: "smooth",
            });
          }
        }, 100);
      }

      // Scroll suave para links de 칙ncora
      document.addEventListener("click", (e) => {
        const target = e.target as HTMLElement | null;
        if (!target) return;
        const link = target.closest('a[href^="#"]') as HTMLAnchorElement | null;
        if (link && link.getAttribute("href") !== "#") {
          e.preventDefault();
          const targetId = link.getAttribute("href");
          if (targetId) {
            const element = document.querySelector(targetId);
            if (element) {
              const headerOffset = 80;
              const elementPosition = element.getBoundingClientRect().top;
              const offsetPosition =
                elementPosition + window.pageYOffset - headerOffset;

              window.scrollTo({
                top: offsetPosition,
                behavior: "smooth",
              });
              // Atualiza a URL sem recarregar a p치gina
              history.pushState(null, "", targetId);
            }
          }
        }
      });
    </script>
  </body>
</html>

<style></style>
